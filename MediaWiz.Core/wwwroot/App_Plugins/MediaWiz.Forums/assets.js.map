{"version":3,"file":"assets.js","sources":["../../../assets/src/modal/modal-token.ts","../../../assets/src/actions/entity/member.entity.action.ts","../../../assets/src/actions/entity/manifest.ts","../../../assets/src/modal/manifest.ts","../../../assets/src/index.ts"],"sourcesContent":["import { UmbModalToken } from \"@umbraco-cms/backoffice/modal\";\r\n\r\nexport interface MemberCustomModalData {\r\n    headline: string;\r\n    content: string;\r\n}\r\n\r\nexport interface MemberCustomModalValue {\r\n    content: string \r\n}\r\n\r\nexport const MEMBER_CUSTOM_MODAL = new UmbModalToken<MemberCustomModalData, MemberCustomModalValue>(\r\n    \"member.custom.modal\",\r\n    {\r\n        modal: {\r\n            type: 'sidebar',\r\n            size: 'medium'\r\n        }\r\n    }\r\n);","import { UmbControllerHostElement } from \"@umbraco-cms/backoffice/controller-api\";\r\nimport { UmbEntityActionArgs, UmbEntityActionBase } from \"@umbraco-cms/backoffice/entity-action\";\r\nimport { UMB_MODAL_MANAGER_CONTEXT, UmbModalManagerContext } from \"@umbraco-cms/backoffice/modal\";\r\nimport { MEMBER_CUSTOM_MODAL } from \"../../modal/modal-token.ts\";\r\nimport { UmbMemberDetailRepository  } from '@umbraco-cms/backoffice/member';\r\nexport class MemberEntityAction extends UmbEntityActionBase<UmbMemberDetailRepository> {\r\n    #modalManagerContext?: UmbModalManagerContext;\r\n    constructor(host: UmbControllerHostElement, args: UmbEntityActionArgs<UmbMemberDetailRepository>)\r\n    {\r\n        super(host, args)\r\n        // Fetch/consume the contexts & assign to the private fields\r\n        this.consumeContext(UMB_MODAL_MANAGER_CONTEXT, (instance) => {\r\n            this.#modalManagerContext = instance;\r\n        });\r\n\r\n    }\r\n    \r\n    async execute() {\r\n                //The modal does NOT return any data when closed (it does not submit)\r\n        const modal = this.#modalManagerContext?.open(this, MEMBER_CUSTOM_MODAL, {\r\n            data: {\r\n                headline:'Resend Validation',\r\n                content: 'Do you want to resend the validation Email?'\r\n            }\r\n        });\r\n\r\n        await modal?.onSubmit().then(() => {\r\n            const headers: Headers = new Headers()\r\n            headers.set('Content-Type', 'application/json')\r\n            headers.set('Accept', 'application/json')\r\n\r\n            const request: RequestInfo = new Request('/sendvalidation/' + this.args.unique?.toString(), {\r\n                method: 'GET',\r\n                headers: headers,\r\n            })\r\n            // Send the request and print the response\r\n            return fetch(request)\r\n            .then(res => {\r\n                console.log(\"got response:\", res)\r\n            })\r\n        }).catch(() => {\r\n            return;\r\n        });\r\n\r\n    }\r\n\r\n}","import { UMB_MEMBER_ENTITY_TYPE } from \"@umbraco-cms/backoffice/member\";\r\nimport { ManifestEntityAction } from \"@umbraco-cms/backoffice/extension-registry\";\r\nimport { MemberEntityAction } from \"./member.entity.action\";\r\n\r\nconst entityAction: ManifestEntityAction = {\r\n    type: 'entityAction',\r\n    kind: 'default',\r\n    alias: 'member.entity.action',\r\n    name: 'member action',\r\n    weight: -100,\r\n    forEntityTypes: [\r\n        UMB_MEMBER_ENTITY_TYPE\r\n    ],\r\n    api: MemberEntityAction,\r\n    meta: {\r\n        icon: 'icon-message',\r\n        label: 'Resend Validation',\r\n\r\n    },\r\n    conditions: [{\r\n        alias: \"Umb.Condition.SectionAlias\",\r\n        match: \"Umb.Section.Members\"\r\n    }]\r\n}\r\n\r\nexport const manifests = [entityAction];","import { ManifestModal } from \"@umbraco-cms/backoffice/extension-registry\";\r\n\r\nconst modals: Array<ManifestModal> = [\r\n    {\r\n        type: 'modal',\r\n        alias: 'member.custom.modal',\r\n        name: 'Member custom modal',\r\n        js: () => import('./modal-element.js')\r\n    }\r\n];\r\n\r\nexport const manifests = [...modals];","import { UmbEntryPointOnInit } from '@umbraco-cms/backoffice/extension-api';\r\nimport { ManifestTypes } from '@umbraco-cms/backoffice/extension-registry';\r\n\r\n// load up the manifests here.\r\nimport { manifests as entityActionManifests } from './actions/entity/manifest.ts';\r\nimport { manifests as modalManifests } from './modal/manifest.ts';\r\n\r\nconst manifests: Array<ManifestTypes> = [\r\n    ...entityActionManifests,\r\n    ...modalManifests\r\n];\r\n\r\nexport const onInit: UmbEntryPointOnInit = (_host, extensionRegistry) => {\r\n    \r\n    // register them here. \r\n    extensionRegistry.registerMany(manifests);\r\n};\r\n"],"names":["MEMBER_CUSTOM_MODAL","UmbModalToken","MemberEntityAction","UmbEntityActionBase","host","args","__privateAdd","_modalManagerContext","UMB_MODAL_MANAGER_CONTEXT","instance","__privateSet","modal","_a","__privateGet","headers","request","res","entityAction","UMB_MEMBER_ENTITY_TYPE","manifests","modals","entityActionManifests","modalManifests","onInit","_host","extensionRegistry"],"mappings":";;;;;;;;;;;;AAWO,MAAMA,IAAsB,IAAIC;AAAA,EACnC;AAAA,EACA;AAAA,IACI,OAAO;AAAA,MACH,MAAM;AAAA,MACN,MAAM;AAAA,IACV;AAAA,EACJ;AACJ;;ACdO,MAAMC,UAA2BC,EAA+C;AAAA,EAEnF,YAAYC,GAAgCC,GAC5C;AACI,UAAMD,GAAMC,CAAI;AAHpB,IAAAC,EAAA,MAAAC,GAAA;AAKS,SAAA,eAAeC,GAA2B,CAACC,MAAa;AACzD,MAAAC,EAAA,MAAKH,GAAuBE;AAAA,IAAA,CAC/B;AAAA,EAEL;AAAA,EAEA,MAAM,UAAU;;AAEZ,UAAME,KAAQC,IAAAC,EAAA,MAAKN,OAAL,gBAAAK,EAA2B,KAAK,MAAMZ,GAAqB;AAAA,MACrE,MAAM;AAAA,QACF,UAAS;AAAA,QACT,SAAS;AAAA,MACb;AAAA,IAAA;AAGJ,WAAMW,KAAA,gBAAAA,EAAO,WAAW,KAAK,MAAM;;AACzB,YAAAG,IAAmB,IAAI;AACrB,MAAAA,EAAA,IAAI,gBAAgB,kBAAkB,GACtCA,EAAA,IAAI,UAAU,kBAAkB;AAElC,YAAAC,IAAuB,IAAI,QAAQ,uBAAqBH,IAAA,KAAK,KAAK,WAAV,gBAAAA,EAAkB,aAAY;AAAA,QACxF,QAAQ;AAAA,QACR,SAAAE;AAAA,MAAA,CACH;AAED,aAAO,MAAMC,CAAO,EACnB,KAAK,CAAOC,MAAA;AACD,gBAAA,IAAI,iBAAiBA,CAAG;AAAA,MAAA,CACnC;AAAA,IAAA,GACF,MAAM,MAAM;AAAA,IACX;AAAA,EAGR;AAEJ;AAxCIT,IAAA;ACFJ,MAAMU,IAAqC;AAAA,EACvC,MAAM;AAAA,EACN,MAAM;AAAA,EACN,OAAO;AAAA,EACP,MAAM;AAAA,EACN,QAAQ;AAAA,EACR,gBAAgB;AAAA,IACZC;AAAA,EACJ;AAAA,EACA,KAAKhB;AAAA,EACL,MAAM;AAAA,IACF,MAAM;AAAA,IACN,OAAO;AAAA,EAEX;AAAA,EACA,YAAY,CAAC;AAAA,IACT,OAAO;AAAA,IACP,OAAO;AAAA,EAAA,CACV;AACL,GAEaiB,IAAY,CAACF,CAAY,GCvBhCG,IAA+B;AAAA,EACjC;AAAA,IACI,MAAM;AAAA,IACN,OAAO;AAAA,IACP,MAAM;AAAA,IACN,IAAI,MAAM,OAAO,6BAAoB;AAAA,EACzC;AACJ,GAEaD,IAAY,CAAC,GAAGC,CAAM,GCJ7BD,IAAkC;AAAA,EACpC,GAAGE;AAAAA,EACH,GAAGC;AACP,GAEaC,IAA8B,CAACC,GAAOC,MAAsB;AAGrE,EAAAA,EAAkB,aAAaN,CAAS;AAC5C;"}