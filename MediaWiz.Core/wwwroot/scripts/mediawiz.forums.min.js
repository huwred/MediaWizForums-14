function getLang(){return navigator.languages!=undefined?navigator.languages[0]:navigator.language}function goToTheEnd(){var t=tinyMCE.activeEditor,i=t.dom.getRoot(),n=i.childNodes[i.childNodes.length-1];tinymce.isGecko&&(n=n.childNodes[n.childNodes.length-1]);t.selection.select(n);t.selection.collapse(!1)}var MediaWiz=MediaWiz||{tools:"code undo redo | styleselect | bullist numlist | indent outdent | link codesample",returnUrl:"",currLang:getLang(),editPost:function(n){$.ajax({type:"GET",url:"/umbraco/surface/forumssurface/editPost/"+n,success:function(n){$("#partial-form").html(n)},error:function(n){console.log(n);alert(n)}})},deletePost:function(n){if(window.confirm("Are you sure you want to delete this post?")){var t=$.get("/deletepost/"+n);t.done(function(){location.reload()});t.fail(function(){alert("sorry, there was an error deleting this post")})}},markAnswer:function(n){if(window.confirm("Are you sure you want to mark this post as the answer?")){var t=$.get("/markanswer/"+n);t.done(function(){location.reload()});t.fail(function(n){alert("sorry, there was an error marking this post as the answer"+n)})}},lockPost:function(n){if(window.confirm("Are you sure you want to lock/unlock this post?")){var t=$.get("/lockpost/"+n);t.done(function(){location.reload()});t.fail(function(n){alert("sorry, there was an error locking this post"+n)})}},approvePost:function(n){if(window.confirm("Are you sure you want to Approve this post?")){var t=$.get("/approve/"+n);t.done(function(){location.reload()});t.fail(function(n){alert("sorry, there was an error approving the post"+n)})}},lockUser:function(n,t){$.ajax({type:"GET",url:"/lockuser/"+n+"/?mode="+t,success:function(n){n&&location.reload(!0)},error:function(n){alert(n)}})},captchaCheck:function(n,t){$.ajax({url:"/captchacheck/"+n,type:"GET",success:function(n){t&&t(n)},error:function(n){return alert(n),!1}})},InitTinyMce:function(n){window.tinymce.init({selector:n,browser_spellcheck:!0,contextmenu:!1,plugins:"link lists anchor codesample image code emoticons",toolbar:MediaWiz.tools,file_picker_types:"image",images_upload_url:"/forumupload",images_reuse_filename:!0,statusbar:!1,menubar:!1,relative_urls:!1,remove_script_host:!0,document_base_url:window.location.protocol+"//"+window.location.host+"/",convert_urls:!0,init_instance_callback:function(){},content_css:!1,content_style:`

                        blockquote {
                            border-left: 4px solid #ddd;
                            padding: 0 15px;
                            color: #777;
                        }
                        .mce-content-body img {
                            max-width: 99% !important;
                            height: auto;
                        } 
                    `});document.addEventListener("focusin",n=>{n.target.closest(".tox-tinymce-aux, .moxman-window, .tam-assetmanager-root")!==null&&n.stopImmediatePropagation()})}};$(document).ready(function(){MediaWiz.returnUrl.length>1&&window.pageRedirect(MediaWiz.returnUrl);$(".btn-cancel").on("click",function(){history.back()});$(".post-quote").on("click",function(n){n.stopPropagation();n.preventDefault();tinymce.activeEditor.setContent("<blockquote>"+$("#postcontent_"+$(this).data("postid")).html()+"<\/blockquote><br/> ");goToTheEnd()});$(".post-delete").on("click",function(n){n.stopPropagation();n.preventDefault();MediaWiz.deletePost($(this).data("postid"))});$(".post-lock").on("click",function(n){n.stopPropagation();n.preventDefault();MediaWiz.lockPost($(this).data("postid"))});$(".post-approve").on("click",function(n){n.stopPropagation();n.preventDefault();MediaWiz.approvePost($(this).data("postid"))});$(".post-answer").on("click",function(n){n.stopPropagation();n.preventDefault();MediaWiz.markAnswer($(this).data("postid"))});$(".post-edit").on("click",function(n){n.stopPropagation();n.preventDefault();MediaWiz.editPost($(this).data("postid"))});$(".lock-user").on("click",function(n){n.stopPropagation();n.preventDefault();MediaWiz.lockUser($(this).data("userid"),$(this).data("mode"))});$("#editPostModal").on("show.bs.modal",function(){setTimeout(function(){MediaWiz.InitTinyMce("#partial-form textarea")},300)});$("#editPostModal").on("hide.bs.modal",function(){tinymce.remove("#partial-form textarea")})});$("li.reply").hover(function(){$(this).find(".tool-label").show()},function(){$(this).find(".tool-label").hide()});$("li.topic").hover(function(){$(this).find(".tool-label").show()},function(){$(this).find(".tool-label").hide()});